import{r as l,a as N,b as w,R as _}from"./vendor-bd5cebc3.js";(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))n(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&n(c)}).observe(document,{childList:!0,subtree:!0});function o(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(t){if(t.ep)return;t.ep=!0;const s=o(t);fetch(t.href,s)}})();var g={exports:{}},x={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var R=l,D=Symbol.for("react.element"),C=Symbol.for("react.fragment"),L=Object.prototype.hasOwnProperty,O=R.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0};function y(a,r,o){var n,t={},s=null,c=null;o!==void 0&&(s=""+o),r.key!==void 0&&(s=""+r.key),r.ref!==void 0&&(c=r.ref);for(n in r)L.call(r,n)&&!E.hasOwnProperty(n)&&(t[n]=r[n]);if(a&&a.defaultProps)for(n in r=a.defaultProps,r)t[n]===void 0&&(t[n]=r[n]);return{$$typeof:D,type:a,key:s,ref:c,props:t,_owner:O.current}}x.Fragment=C;x.jsx=y;x.jsxs=y;g.exports=x;var e=g.exports,h={},b=N;h.createRoot=b.createRoot,h.hydrateRoot=b.hydrateRoot;const I=({onFileSelect:a})=>{const[r,o]=l.useState(!1),n=l.useRef(null),t=l.useCallback(i=>{i.preventDefault(),o(!0)},[]),s=l.useCallback(i=>{i.preventDefault(),o(!1)},[]),c=l.useCallback(i=>{i.preventDefault(),o(!1);const d=i.dataTransfer.files;if(d&&d.length>0){const p=d[0];p.type.startsWith("image/")&&a(p)}},[a]),u=l.useCallback(i=>{const d=i.target.files;d&&d.length>0&&a(d[0])},[a]),m=l.useCallback(()=>{var i;(i=n.current)==null||i.click()},[]);return e.jsxs("div",{className:`border-2 border-dashed border-gray-300 rounded-lg p-8 text-center cursor-pointer transition-colors ${r?"border-blue-500 bg-blue-50":"hover:border-gray-400"}`,onDragOver:t,onDragLeave:s,onDrop:c,children:[e.jsx("p",{className:"text-gray-600",children:"Drag and drop an image of a potato plant leaf to process"}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",ref:n,onChange:u}),e.jsx("button",{className:"mt-4 px-4 py-2 bg-white border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50",onClick:m,children:"Select File"})]})},S=()=>e.jsx("header",{className:"bg-[#be6a77] shadow-none text-white",children:e.jsx("div",{className:"container mx-auto px-4 py-3 flex items-center",children:e.jsx("h1",{className:"text-xl font-semibold",children:"CodeBasics: Potato Disease Classification"})})}),k={}.VITE_API_URL||"http://localhost:8000/predict",P=async a=>{const r=new FormData;r.append("file",a);try{return(await w.post(k,r,{headers:{"Content-Type":"multipart/form-data"}})).data}catch(o){throw console.error("Upload failed:",o),o}},U=()=>{const[a,r]=l.useState(null),[o,n]=l.useState(null),[t,s]=l.useState(null),[c,u]=l.useState(!1),[m,i]=l.useState(!1),d=l.useCallback(async()=>{if(c&&a){i(!0);try{const f=await P(a);s(f)}catch(f){console.error("Upload failed:",f),s({class:"Error",confidence:0})}finally{i(!1)}}},[c,a]),p=l.useCallback(()=>{s(null),u(!1),r(null),n(null)},[]),j=l.useCallback(f=>{r(f),s(null),u(!0)},[]);l.useEffect(()=>{if(!a){n(null);return}const f=URL.createObjectURL(a);return n(f),()=>{URL.revokeObjectURL(f)}},[a]),l.useEffect(()=>{o&&d()},[o,d]);const v=t?(t.confidence*100).toFixed(2):0;return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(S,{}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:`mx-auto max-w-md ${c?"h-[500px]":"h-auto"} bg-transparent shadow-[0px_9px_70px_0px_rgba(0,0,0,0.3)] rounded-xl`,children:[c&&o&&e.jsx("div",{className:"w-full h-full",children:e.jsx("img",{src:o,alt:"Preview",className:"w-full h-full object-contain rounded-xl"})}),!c&&e.jsx("div",{className:"p-4",children:e.jsx(I,{onFileSelect:j})}),t&&e.jsx("div",{className:"bg-white flex flex-col items-center py-4",children:e.jsxs("table",{className:"w-full max-w-xs bg-transparent",children:[e.jsx("thead",{className:"bg-transparent",children:e.jsxs("tr",{className:"bg-transparent",children:[e.jsx("th",{className:"text-sm bg-transparent border-transparent text-[#000000a6] font-bold py-1 px-4 text-left",children:"Label:"}),e.jsx("th",{className:"text-sm bg-transparent border-transparent text-[#000000a6] font-bold py-1 px-4 text-right",children:"Confidence:"})]})}),e.jsx("tbody",{className:"bg-transparent",children:e.jsxs("tr",{className:"bg-transparent",children:[e.jsx("td",{className:"text-xl bg-transparent border-transparent text-[#000000a6] font-bold py-1 px-4",children:t.class}),e.jsxs("td",{className:"text-xl bg-transparent border-transparent text-[#000000a6] font-bold py-1 px-4 text-right",children:[v,"%"]})]})})]})}),m&&e.jsxs("div",{className:"flex flex-col items-center py-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-[#be6a77]"}),e.jsx("p",{className:"mt-2 text-lg",children:"Processing"})]})]})}),t&&e.jsx("div",{className:"flex justify-center mt-4",children:e.jsx("button",{className:"w-full max-w-xs rounded-xl p-4 text-[#000000a6] text-lg font-bold bg-white hover:bg-[#ffffff7a]",onClick:p,children:e.jsx("span",{className:"flex items-center justify-center",children:"Clear"})})})]})]})};function F(){return e.jsx(U,{})}h.createRoot(document.getElementById("root")).render(e.jsx(_.StrictMode,{children:e.jsx(F,{})}));
//# sourceMappingURL=index-97df35a3.js.map
